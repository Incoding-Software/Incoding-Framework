"use strict";function IncAjaxEvent(){this.ResponseText="",this.StatusCode="",this.StatusText=""}function IncSpecialBinds(){}function AjaxAdapter(){this.params=function(e){var t=[];return $(e).each(function(){var e=this.name,n=this.selector;if(ExecutableHelper.IsNullOrEmpty(n))return void t.push({name:e,value:n});var r=$(e.toSelectorAsName()).is("[type=checkbox],select,[type=radio]"),a=_.isArray(n)||n.toString().contains(",");_.isArray(n)||a&&r?$(n.toString().split(",")).each(function(){t.push({name:e,value:this})}):t.push({name:e,value:n})}),t},this.request=function(e,t){return $.extend(e,{url:e.url.split("?")[0],headers:{"X-Requested-With":"XMLHttpRequest"},dataType:"JSON",success:function(e,n,r){$(document).trigger(jQuery.Event(IncSpecialBinds.IncAjaxSuccess),IncodingResult.Success(IncAjaxEvent.Create(r)));var a=new IncodingResult(e);t(a)},beforeSend:function(e,t){$(document).trigger(jQuery.Event(IncSpecialBinds.IncAjaxBefore),IncodingResult.Success(IncAjaxEvent.Create(e)))},complete:function(e,t){$(document).trigger(jQuery.Event(IncSpecialBinds.IncAjaxComplete),IncodingResult.Success(IncAjaxEvent.Create(e)))},error:function(e,t,n){$(document).trigger(jQuery.Event(IncSpecialBinds.IncAjaxError),IncodingResult.Success(IncAjaxEvent.Create(e)))},data:this.params(e.data)}),$.ajax(e)}}function ExecutableHelper(){var isSelector=function(e){return e.startsWith("||")&&e.endWith("||")},isJquerySelector=function(e){return e.startsWith("$(")},getJquery=function(e){if($(e).is(":checkbox")){var t=$(e).filter(":checkbox");if(1==t.length)return $(t).is(":checked");if(t.length>1){var n=[];return $(t).each(function(){return $(this).is(":checked")?(n.push($(this).val()),!0):!0}),n}}else{if($(e).is("select")&&$(e).length>1){var n=[];return $(e).each(function(){var e=$(this).val();ExecutableHelper.IsNullOrEmpty(e)||n.push(e)}),n}if($(e).is("select[multiple]")){var n=[];return $($(e).val()).each(function(){ExecutableHelper.IsNullOrEmpty(this)||n.push(this)}),n}if($(e).is(":radio"))return $($(e).prop("name").toSelectorAsName()+":checked").val();if($(e).isFormElement())return $(e).val()}var r=$(e).val();return ExecutableHelper.IsNullOrEmpty(r)?$.trim($(e).html()):r},getResult=function(e,t){if(ExecutableHelper.IsNullOrEmpty(e))return t;var n=[];if(e.startsWith("[")){var r=e.substring(e.indexOf("[")+1,e.indexOf("]"));t=t[r],e=e.substring(e.indexOf("]")+1,e.length)}return $(_.isArray(t)?t:[t]).each(function(){var t=this;$(e.split(".")).each(function(){if(ExecutableHelper.IsNullOrEmpty(this))return!0;var e=this.substring(this.indexOf("[")+1,this.indexOf("]"));if(!ExecutableHelper.IsNullOrEmpty(e)){var n=t[this.substring(0,this.indexOf("["))];return t=n[e],!0}var r=this.substring(this.indexOf("(")+1,this.lastIndexOf(")"));if(!ExecutableHelper.IsNullOrEmpty(r)){var a=this.substring(0,this.indexOf("("));if("Select"===a){var i=[];$(t).each(function(){i.push(getResult(r,this))}),t=i}if("Any"===a){var s=!1,o=r.split(" ");$(t).each(function(){var e=$.extend({},ExecutableHelper.Instance,{result:this}),t=e.TryGetVal(o[0]),n=e.TryGetVal(o[2]),r=o[1];return s=ExecutableHelper.Compare(t,n,r),s?!1:!0}),t=s}return!0}t=t[this]}),n.push(ExecutableHelper.IsNullOrEmpty(t)?"":t)}),1===n.length?n[0]:n};this.self="",this.target="",this.event="",this.result="",this.TryGetVal=function(selector){if(ExecutableHelper.IsNullOrEmpty(selector))return selector;if(selector instanceof jQuery)return 0!=selector.length?getJquery(selector):"";var isPrimitiveType=_.isNumber(selector)||_.isBoolean(selector)||_.isArray(selector)||_.isDate(selector)||_.isFunction(selector),isObject=_.isObject(selector)&&!_.isElement($(selector)[0]);if((isPrimitiveType||isObject)&&!_.isString(selector))return selector;if(selector=selector.toString(),!isJquerySelector(selector)&&!isSelector(selector))return selector;if(isJquerySelector(selector))return this.TryGetVal(eval(selector));var res;if(isSelector(selector)){var valueSelector=selector.substring(2,selector.length-2).substring(selector.indexOf("*")-1,selector.length),isType=function(e){return selector.startsWith("||{0}*".f(e))};if(isType("buildurl")){var toBuildUrl=$.url(valueSelector);return $.eachProperties(toBuildUrl.param(),function(){toBuildUrl.setParam(this,ExecutableHelper.Instance.TryGetVal(toBuildUrl.param()[this]))}),$.eachProperties(toBuildUrl.fparam(),function(){toBuildUrl.setFparam(this,ExecutableHelper.Instance.TryGetVal(toBuildUrl.fparam()[this]))}),toBuildUrl.toHref()}if(isType("ajax")){var options=$.extend(!0,{data:[]},$.parseJSON(valueSelector)),ajaxUrl=$.url(options.url);$.eachProperties(ajaxUrl.param(),function(){options.data.push({name:this,selector:ExecutableHelper.Instance.TryGetVal(ajaxUrl.param()[this])})});var ajaxData;AjaxAdapter.Instance.request(options,function(e){ajaxData=e.data}),res=ajaxData}else isType("cookie")?res=$.cookie(valueSelector):isType("hashQueryString")?res=$.url(window.location.href).fparam(valueSelector.split(":")[0],valueSelector.split(":")[1]):isType("hashUrl")?res=$.url(window.location.href).furl(valueSelector):isType("queryString")?res=$.url(window.location.href).param(valueSelector):isType("value")?res=valueSelector.replaceAll("1ADC3DB4-D196-4E59-9FC0-6FAD2633EF07","|").replaceAll("42CE7EF2-7812-4E6D-8071-676DA8CA7ED7","*"):isType("javascript")?res=eval(valueSelector):isType("result")&&(res=getResult(valueSelector,this.result))}return ExecutableHelper.IsNullOrEmpty(res)?"":res},this.TrySetValue=function(e,t){$(e).is("[type=hidden]")&&$(e).is(":checkbox")&&2==$(e).length&&(e=$(e).filter(":checkbox"));{if(!$(e).is(":checkbox"))return $(e).is("select[multiple]")?void $(e).val(t.split(",")):$(e).is("select")&&$(e).length>1?void $(_.isArray(t)?t:t.split(",")).each(function(){""!=this.toString()&&$('option[value="{0}"]'.f(this)).closest("select").val(this.toString())}):$(e).is(":radio")?void $($(e).prop("name").toSelectorAsName()+'[value="{0}"]'.f(t)).prop("checked",!0):void($(e).isFormElement()?$(e).val(t):$(e).html(t));var n=e;if($(n).prop("checked",!1),1==$(n).length)ExecutableHelper.ToBool(t)&&$(n).prop("checked",!0);else{var r=_.isArray(t)?t:t.split(",");$(n).each(function(){r.contains($(this).val())?$(this).prop("checked",!0):$(this).prop("checked",!1)})}}}}function IncMustacheTemplate(){this.compile=function(e){return e},this.render=function(e,t){var n=Mustache.compile(e);return n(t)}}function IncHandlerbarsTemplate(){this.compile=function(e){return navigator.Ie8?e:Handlebars.precompile(e)},this.render=function(tmpl,data){return navigator.Ie8?Handlebars.compile(tmpl)(data):(_.isFunction(tmpl)||(tmpl=eval("("+tmpl+")")),Handlebars.template(tmpl)(data))}}function IncDoTTemplate(){this.compile=function(e){return navigator.Ie8?e:doT.compile(e)},this.render=function(e,t){return doT.template(e)(t)}}function TemplateFactory(){}function purl(e){function t(){this.parseUri=function(e){var t={attr:{},param:{}},n="#";if(e.contains(n)){t.attr.fragment=e.split(n)[1].replace("!","");var r=this,a={};$.each(t.attr.fragment.split("&"),function(){var e=this.contains(":")?this.split(":")[0]:"root",t=this.contains("?")?this.split("?")[1]:this;t=t.replace(e+":","");var n=r.parseString(t,"/");$.eachProperties(n,function(){var t="{0}__{1}".f(e,this);a[t]=n[this]})}),t.param.fragment=a}else t.attr.fragment="",t.param.fragment={};return e.split(n)[0].contains("?")?t.param.query=this.parseString(e.split(n)[0].split("?")[1],"&"):t.param.query={},t.attr.base=e.split("#")[0].split("?")[0],t.attr.isWasHash=e.contains("#"),t.attr.fullBase=e.contains("#")?e.split("#")[0]:e,t},this.merge=function(e,t,n){return this.set(e.base,t,n),e},this.parseString=function(e,t){var n=this;return this.reduce(String(e).split(t),function(e,t){try{t=ExecutableHelper.UrlDecode(t.replace(/\+/g," "))}catch(r){}var a=t.indexOf("="),i=n.lastBraceInKey(t),s=t.substr(0,i||a),o=t.substr(i||a,t.length),o=o.substr(o.indexOf("=")+1,o.length);return""==s&&(s=t,o=""),n.merge(e,s,o)},{base:{}}).base},this.set=function(e,t,n){var r=e[t];void 0===r&&(e[t]=n)},this.lastBraceInKey=function(e){for(var t,n,r=e.length,a=0;r>a;++a)if(n=e[a],"]"==n&&(t=!1),"["==n&&(t=!0),"="==n&&!t)return a},this.reduce=function(e,t){for(var n=0,r=e.length>>0,a=arguments[2];r>n;)n in e&&(a=t.call(void 0,a,e[n],n,e)),++n;return a}}return{data:(new t).parseUri(e),attr:function(e){return e={anchor:"fragment"}[e]||e,"undefined"!=typeof e?this.data.attr[e]:this.data.attr},param:function(e){return 0!=arguments.length?ExecutableHelper.UrlDecode(this.data.param.query[e]):this.data.param.query},fparam:function(e,t){if(0==arguments.length)return this.data.param.fragment;var n="{0}__{1}".f(t,e);return this.data.param.fragment.hasOwnProperty(n)?ExecutableHelper.UrlDecode(this.data.param.fragment[n]):""},encodeAllParams:function(){var e=this,t=e.fparam();$.eachProperties(t,function(){var n=this.split("__")[1],r=this.split("__")[0],a=t[this.toString()];e.setFparam(n,a,r)})},setFparam:function(e,t,n){var r=ExecutableHelper.IsNullOrEmpty(n)?e:"{0}__{1}".f(n,e);return this.data.param.fragment[r]=ExecutableHelper.UrlEncode(t)},setParam:function(e,t){return this.data.param.query[e]=ExecutableHelper.UrlEncode(t)},removeFparam:function(e,t){var n="{0}__{1}".f(t,e);this.data.param.fragment.hasOwnProperty(n)&&delete this.data.param.fragment[n]},clearFparam:function(){return this.data.param.fragment=[]},fprefixes:function(){var e=["root"];return $.eachProperties(this.fparam(),function(){var t=this.split("__")[0];return e.contains(t)?!0:void e.push(t)}),e},furl:function(e){var t={root:""},n=this.data.attr.fragment.contains("&")?this.data.attr.fragment.split("&"):[this.data.attr.fragment];$(n).each(function(){if(this.contains(":")){var e=this.split(":");t[e[0]]=e[1]}else t.root=this});var r=t[e];return _.isUndefined(r)?"":r.contains("?")?r.split("?")[0]:""},setFurl:function(e){var t=e.contains("?")?e:e+"?";this.data.attr.fragment=t},toHref:function(){var e=this,t="?";$.eachProperties(e.param(),function(n){t+="{0}{1}={2}".f(0===n?"":"&",this,ExecutableHelper.UrlEncode(e.param()[this]))});var n="#!";return $.each(e.fprefixes(),function(t){n+=0==t?"":"&";var r=this;"root"!=r&&(n+="{0}:".f(r)),ExecutableHelper.IsNullOrEmpty(e.furl(r))||(n+=e.furl(r)+"?"),$.eachProperties(e.fparam(),function(t){var a=r+"__";if(!this.contains(a))return!0;var i=this.replace(a,"");if(ExecutableHelper.IsNullOrEmpty(i))return!0;var s=["?","!",":"].contains(n.charAt(n.length-1));n+="{0}{1}={2}".f(s?"":"/",i,ExecutableHelper.UrlEncode(e.fparam()[this]))})}),t="?"===t?"":t.trim(),n="#!"===n&&e.data.attr.isWasHash?"":n.trim(),e.data.attr.base+t+n}}}function InitGps(){navigator.geolocation&&!navigator.geolocation.currentPosition&&(navigator.geolocation.currentPosition={longitude:0,latitude:0},navigator.geolocation.getCurrentPosition(function(e){navigator.geolocation.currentPosition=e.coords},function(){}))}function incodingExtend(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.superclass=t.prototype}function IncodingMetaElement(e){var t="incoding-runner",n=function(e,t){var n=$(e).attr(t);return ExecutableHelper.IsNullOrEmpty(n)?(n=$(e).prop(t),ExecutableHelper.IsNullOrEmpty(n)?(n=$.data(e,t),ExecutableHelper.IsNullOrEmpty(n)?$(e).data(t):n):n):n};this.element=e,this.runner=n(e,t),this.executables=ExecutableHelper.IsNullOrEmpty(n(e,"incoding"))?"":$.parseJSON(n(e,"incoding")),this.bind=function(e,t){var n=this.element;$.each(IncSpecialBinds.DocumentBinds,function(){return e.contains(this)?(e=e.replaceAll(this,""),void $(document).bind(this.toString(),function(e,t){return new IncodingMetaElement(n).invoke(e,t),!1})):!0}),""!==e&&$(this.element).bind(e.toString(),function(n,r){new IncodingMetaElement(this).invoke(n,r);var a=t.toString();return"4"===a||e===IncSpecialBinds.Incoding?!1:("2"===a&&n.preventDefault(),"3"===a&&n.stopPropagation(),!0)})},this.invoke=function(e,t){ExecutableHelper.IsNullOrEmpty(this.runner)||this.runner.DoIt(e,t)},this.flushRunner=function(e){$.data(this.element,t,e)}}function IncodingRunner(){this.actions=[],this.before=[],this.success=[],this.error=[],this.complete=[],this.breakes=[]}function IncClientException(){}function IncodingResult(e){var t=function(e){try{var t=_.isObject(e)?e:$.parseJSON(e),n=_.has(t,"success")&&_.has(t,"redirectTo")&&_.has(t,"data");if(!n)throw new"Not valid json result";return t}catch(r){return console.log("fail parse result:{0}".f(e)),console.log("with exception:{0}".f(r)),""}};this.parseJson=t(e),this.isValid=function(){return!ExecutableHelper.IsNullOrEmpty(this.parseJson)},this.redirectTo=this.isValid()?this.parseJson.redirectTo:"",this.success=this.isValid()?this.parseJson.success:!1,this.data=this.isValid()?this.parseJson.data:""}function IncodingEngine(){this.parse=function(e){var t="[incoding]",n=[];$(t,e).add($(e).is(t)?e:"").each(function(){var e=new IncodingMetaElement(this),t=new IncodingRunner,r=[];$(e.executables).each(function(){var n=this,a=_.isObject(n.data)?n.data:$.parseJSON(n.data),i=ExecutableFactory.Create(n.type,a,e.element);t.Registry(n.type,a.onStatus,i);var s=a.onBind.toString();if(r.contains(s))return!0;r.push(s);var o=ExecutableHelper.IsNullOrEmpty(n.data.onEventStatus)?"1":n.data.onEventStatus;e.bind(s.toString().replaceAll(IncSpecialBinds.InitIncoding,"").replaceAll(" "+IncSpecialBinds.InitIncoding,"").replaceAll(IncSpecialBinds.InitIncoding+" ","").trim().toString(),o.toString())}),e.flushRunner(t),$(this).removeAttr("incoding");var a=0!=$.grep(r,function(e){return e.contains(IncSpecialBinds.InitIncoding)}).length;a&&(e.bind(IncSpecialBinds.InitIncoding,"4"),n.push(this))}),$(n).each(function(){new IncodingMetaElement(this).invoke(jQuery.Event(IncSpecialBinds.InitIncoding))})}}function ExecutableFactory(){}function ExecutableBase(){this.jsonData="",this.onBind="",this.self="",this.event="",this.timeOut=0,this.interval=0,this.intervalId="",this.target="",this.ands=null,this.result="",this.getTarget=function(){return this.self}}function ExecutableActionBase(){}function ExecutableDirectAction(){}function ExecutableEventAction(){}function ExecutableAjaxAction(){}function ExecutableSubmitAction(){}function ExecutableInsert(){}function ExecutableTrigger(){}function ExecutableValidationParse(){}function ExecutableValidationRefresh(){}function ExecutableEval(){}function ExecutableEvalMethod(){}function ExecutableBreak(){}function ExecutableStoreInsert(){}function ExecutableStoreFetch(){}function ExecutableStoreManipulate(){}function ExecutableForm(){}function ExecutableBind(){}function ConditionalFactory(){}function ConditionalBase(){this.jsonData="",this.executable="",this.self="",this.target=""}function ConditionalData(){}function ConditionalDataIsId(){}function ConditionalEval(){}function ConditionalIs(){}IncAjaxEvent.Create=function(e){var t=new IncAjaxEvent;return t.ResponseText=e.responseText,t.StatusCode=e.status,t.StatusText=e.statusText,t},IncSpecialBinds.Incoding="incoding",IncSpecialBinds.InitIncoding="initincoding",IncSpecialBinds.IncChangeUrl="incchangeurl",IncSpecialBinds.IncAjaxBefore="incajaxbefore",IncSpecialBinds.IncAjaxError="incajaxerror",IncSpecialBinds.IncAjaxComplete="incajaxcomplete",IncSpecialBinds.IncAjaxSuccess="incajaxsuccess",IncSpecialBinds.IncInsert="incinsert",IncSpecialBinds.DocumentBinds=[IncSpecialBinds.IncChangeUrl,IncSpecialBinds.IncAjaxBefore,IncSpecialBinds.IncAjaxError,IncSpecialBinds.IncAjaxComplete,IncSpecialBinds.IncAjaxSuccess,IncSpecialBinds.IncInsert],AjaxAdapter.Instance=new AjaxAdapter,ExecutableHelper.Instance=new ExecutableHelper,ExecutableHelper.IsData=function(e,t,n){if(ExecutableHelper.IsNullOrEmpty(t))return n.call(e);var r=!1;return $(_.isArray(e)?e:[e]).each(function(){var e=this[t];return n.call(ExecutableHelper.IsNullOrEmpty(e)?"":e)?(r=!0,!1):void 0}),r},ExecutableHelper.ParaseQueryString=function(e){return!ExecutableHelper.IsNullOrEmpty(e)||e.contains("?")&&e.contains("#")?void 0:[]},ExecutableHelper.Filter=function(e,t){var n;return _.isArray(e)?(n=[],$(e).each(function(){t.isSatisfied(this)&&n.push(this)})):n=t.isSatisfied(e)?e:{},n},ExecutableHelper.Compare=function(e,t,n){if(n=n.toString().toLowerCase(),"isempty"==n)return ExecutableHelper.IsNullOrEmpty(e);if(e=ExecutableHelper.IsNullOrEmpty(e)?"":e.toString().toUpperCase(),t=ExecutableHelper.IsNullOrEmpty(t)?"":t.toString().toUpperCase(),"equal"==n)return e===t;if("notequal"==n)return e!==t;if("iscontains"==n)return e.contains(t);if("lessthan"==n)return parseFloat(e)<parseFloat(t);if("lessthanorequal"==n)return parseFloat(e)<=parseFloat(t);if("greaterthan"==n)return parseFloat(e)>parseFloat(t);if("greaterthanorequal"==n)return parseFloat(e)>=parseFloat(t);throw new IncClientException({message:"Can't compare by method {0}".f(n)},{})},ExecutableHelper.IsNullOrEmpty=function(e){var t=_.isUndefined(e)||_.isNull(e)||_.isNaN(e)||"undefined"==e;if(t)return!0;if(_.isString(e))return _.isEmpty(e.toString());if(_.isArray(e))return 0==e.length;if(_.isNumber(e)||_.isDate(e)||_.isBoolean(e)||_.isFunction(e))return!1;var n=!1;return $.eachProperties(e,function(){n=!0}),!n},ExecutableHelper.RedirectTo=function(e){var t=decodeURIComponent(e),n=decodeURIComponent(window.location.hash),r=t.contains("#")&&n.replace("#","")==t.split("#")[1];return r?void $(document).trigger(jQuery.Event(IncSpecialBinds.IncChangeUrl)):void(window.location=e)},ExecutableHelper.UrlDecode=function(e){return decodeURIComponent(e)},ExecutableHelper.UrlEncode=function(e){if(ExecutableHelper.IsNullOrEmpty(e))return e;var t=function(){return this.replaceAll("&","%26").replaceAll("?","%3F").replaceAll("/","%2F").replaceAll("=","%3D").replaceAll(":","%3A").replaceAll("@","%40").replaceAll("#","%23")};if(e instanceof Array){for(var n=0;n<e.length;n++)e[n]=t.call(e[n]);return e}return t.call(e.toString())},ExecutableHelper.ToBool=function(e){if(ExecutableHelper.IsNullOrEmpty(e))return!1;if(e instanceof Boolean)return e;var t=e.toString().toLocaleLowerCase();return"true"===t},TemplateFactory.Version="",TemplateFactory.ToHtml=function(e,t,n,r){t+=TemplateFactory.Version,navigator.Ie8&&(t+="ie8");var a="",i="undefined"!=typeof Storage;if(i)try{a=localStorage.getItem(t)}catch(s){a=""}if(ExecutableHelper.IsNullOrEmpty(a)){var o=n();if(ExecutableHelper.IsNullOrEmpty(o))throw"Template is empty";if(a=e.compile(o),i)try{localStorage.remainingSpace<2e3&&localStorage.clear(),localStorage.setItem(t,a)}catch(s){if(!ExecutableHelper.IsNullOrEmpty(s.name)&&s.name.toUpperCase().indexOf("QUOTA")>-1)try{localStorage.clear()}catch(s){}}}return _.isArray(r)||ExecutableHelper.IsNullOrEmpty(r)||(r=[r]),e.render(a,{data:r})},window.console||(window.console={log:function(){},error:function(){},dir:function(){}}),$.extend(String.prototype,{replaceAll:function(e,t){return this.split(e).join(t)},endWith:function(e){return this.substr(this.length-e.length)===e},toSelectorAsName:function(){var e=this;return ExecutableHelper.IsNullOrEmpty(e)&&(e=""),'[name="{0}"]'.f(e.toString().replaceAll("[","\\[").replaceAll("]","\\]"))},startsWith:function(e){return this.substr(0,e.length)===e},trim:function(){return this.replace(/^\s\s*|\s\s*$/g,"")},ltrim:function(){return this.replace(/^\s+/,"")},rtrim:function(){return this.replace(/\s+$/,"")},cutLastChar:function(){return this.substring(0,this.length-1)},contains:function(e){return-1!==this.indexOf(e)},f:function(){for(var e=this,t=arguments.length;t--;)e=e.replace(new RegExp("\\{"+t+"\\}","gm"),arguments[t]);return e}}),$.extend(Array.prototype,{contains:function(e){return-1!=$.inArray(e,this)},remove:function(e,t){var n=this.slice((t||e)+1||this.length);return this.length=0>e?this.length+e:e,this.push.apply(this,n)},sum:function(){var e=0;return $(this).each(function(){e+=parseFloat(this)}),e},max:function(){return this.length>0?Math.max.apply(Math,this):0},min:function(){return this.length>0?Math.min.apply(Math,this):0},average:function(){return this.length>0?this.sum()/this.length:0},first:function(){return this.length>0?this[0]:""},last:function(){return this.length>0?this[this.length-1]:""},count:function(){return this.length},select:function(e){var t=[];return $(this).each(function(){t.push(e(this))}),t}}),$.fn.extend({maxZIndex:function(e){var t={inc:10,group:"*"};$.extend(t,e);var n=0;return $(t.group).each(function(){var e=parseInt($(this).css("z-index"));n=e>n?e:n}),this.each(function(){n+=t.inc,$(this).css({"z-index":n})})},toggleProp:function(e){return this.prop(e)?$(this).prop(e,!1):$(this).prop(e,!0),this},toggleAttr:function(e){return this.attr(e)?$(this).removeAttr(e):this.attr(e,e),this},increment:function(e){return $(this).each(function(){var t=parseInt($(this).val());$(this).val((_.isNaN(t)?0:t)+parseInt(e))})},isFormElement:function(){return $(this).is("select,textarea,input")}}),$.extend({eachProperties:function(e,t){var n=0;for(var r in e){var a=!_.isUndefined(r)||!_.isEmpty(r);a&&e.hasOwnProperty(r)&&t.call(r,n),n++}},eachFormElements:function(e,t){var n,r="input,select,textarea",a='[type="submit"],[type="reset"],[type="button"]';if($(e).is("input,select"))n=e.length>1?e:[e];else{var i=$(e).find(r).not(a);n=i.length>1?i:[i]}$(n).each(function(){var n=$(this).prop("name");if(!ExecutableHelper.IsNullOrEmpty(n)){var r=1===e.length&&e.isFormElement();if(r)t.call(e);else{var a=e.find(n.toSelectorAsName());t.call(0!==a.length?a:e.filter(n.toSelectorAsName()))}}})},url:function(e){return purl(e)}}),function(e,t){function n(e){return decodeURIComponent(e.replace(r," "))}var r=/\+/g,a=e.cookie=function(r,i,s){if(void 0!==i){if(s=e.extend({},a.defaults,s),null===i&&(s.expires=-1),"number"==typeof s.expires){var o=s.expires,c=s.expires=new Date;c.setDate(c.getDate()+o)}return i=a.json?JSON.stringify(i):String(i),t.cookie=[encodeURIComponent(r),"=",encodeURIComponent(i),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("")}for(var l=n,u=t.cookie.split("; "),p=0,h=u.length;h>p;p++){var d=u[p].split("=");if(l(d.shift())===r){var f=l(d.join("="));return a.json?JSON.parse(f):f}}return null};a.defaults={},e.removeCookie=function(t,n){return null!==e.cookie(t)?(e.cookie(t,null,n),!0):!1}}(jQuery,document),navigator.Ie8=function(){var e,t=navigator.appName,n=navigator.userAgent,r=n.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return r&&null!=(e=n.match(/version\/([\.\d]+)/i))&&(r[2]=e[1]),r=r?[r[1],r[2]]:[t,navigator.appVersion,"-?"],r.contains("MSIE")&&r.contains("8.0")}(),IncodingRunner.prototype={DoIt:function(e,t){var n=this,r=function(t){var n=$.trim(t.onBind).split(" ").contains(e.type);return n&&(t.event=e),n};try{$($.grep(this.before,r)).each(function(){this.execute()})}catch(a){if(a instanceof IncClientException)return void $($.grep(this.breakes,r)).each(function(){this.execute(a)});throw a}$($.grep(this.actions,r)).each(function(){var a=this,i=function(e){return e.onBind!==a.onBind?!1:r(e)};a.execute({success:$.grep(n.success,i),error:$.grep(n.error,i),complete:$.grep(n.complete,i),breakes:$.grep(n.breakes,i),eventResult:t,event:e})})},Registry:function(e,t,n){if(e.contains("Action"))this.actions.push(n);else switch(t){case 1:this.before.push(n);break;case 2:this.success.push(n);break;case 3:this.error.push(n);break;case 4:this.complete.push(n);break;case 5:this.breakes.push(n);break;default:throw"Not found status {0}".f(t)}}},IncodingResult.Success=function(e){return new IncodingResult({success:!0,data:e,redirectTo:""})},IncodingResult.Empty=new IncodingResult({data:"",redirectTo:"",success:!0}),IncodingEngine.Current=new IncodingEngine;var initializedHistoryPlugin=!1;$(document).ready(function(){$.history&&$.history.init(function(){initializedHistoryPlugin&&$(document).trigger(jQuery.Event(IncSpecialBinds.IncChangeUrl)),initializedHistoryPlugin=!0}),IncodingEngine.Current.parse(document)}),ExecutableFactory.Create=function(type,data,self){var json=_.isObject(data)?data:$.parseJSON(data),executable=eval("new "+type+"();");return executable.jsonData=json,executable.onBind=json.onBind,executable.self=self,executable.timeOut=json.timeOut,executable.interval=json.interval,executable.intervalId=json.intervalId,executable.ands=json.ands,executable.getTarget=function(){return eval(json.target)},executable},ExecutableBase.prototype={execute:function(e){var t=this;return t.target=t.getTarget(),t.isValid()?t.timeOut>0?void window.setTimeout(function(){t.target=t.getTarget(),t.internalExecute(e)},t.timeOut):t.interval>0?void(ExecutableBase.IntervalIds[t.intervalId]=window.setInterval(function(){t.target=t.getTarget(),t.internalExecute(e)},t.interval)):void t.internalExecute(e):void 0},internalExecute:function(e){},isValid:function(){var e=this;if(ExecutableHelper.IsNullOrEmpty(e.ands))return!0;var t=!1;return $(e.ands).each(function(){var n=!1;return $(this).each(function(){return n=ConditionalFactory.Create(this,e).isSatisfied(e.result),n?void 0:!1}),n?(t=!0,!1):void 0}),t},tryGetVal:function(e){return ExecutableHelper.Instance.self=this.self,ExecutableHelper.Instance.target=this.target,ExecutableHelper.Instance.event=this.event,ExecutableHelper.Instance.result=this.result,ExecutableHelper.Instance.TryGetVal(e)}},ExecutableBase.IntervalIds={},incodingExtend(ExecutableActionBase,ExecutableBase),$.extend(ExecutableActionBase.prototype,{complete:function(e,t){if(!ExecutableHelper.IsNullOrEmpty(e.redirectTo))return void ExecutableHelper.RedirectTo(e.redirectTo);var n=e.data;if(!ExecutableHelper.IsNullOrEmpty(this.jsonData.filterResult)){var r=ConditionalFactory.Create(this.jsonData.filterResult,this);n=ExecutableHelper.Filter(e.data,r)}var a=!1,i=function(){try{this.result=n,this.execute()}catch(e){if(e instanceof IncClientException)return a=!0,!1;if(console.log("Incoding exception: {0}".f(e.message?e.message:e)),navigator.Ie8)return!1;throw e}};$(e.success?t.success:t.error).each(i),$(t.complete).each(i),a&&$(t.breakes).each(i)}}),incodingExtend(ExecutableDirectAction,ExecutableActionBase),ExecutableDirectAction.prototype.internalExecute=function(e){var t=ExecutableHelper.IsNullOrEmpty(this.jsonData.result)?IncodingResult.Empty:new IncodingResult(this.jsonData.result);this.complete(t,e)},incodingExtend(ExecutableEventAction,ExecutableActionBase),ExecutableEventAction.prototype.internalExecute=function(e){this.complete(e.eventResult,e)},incodingExtend(ExecutableAjaxAction,ExecutableActionBase),ExecutableAjaxAction.prototype.internalExecute=function(e){var t=this,n=$.extend(!0,{data:[]},t.jsonData.ajax),r=n.url;if(!ExecutableHelper.IsNullOrEmpty(r)){var a=$.url(r).param();$.eachProperties(a,function(){n.data.push({name:this,selector:t.tryGetVal(a[this])})}),n.url=r.split("?")[0]}if(t.jsonData.hash){var i=$.url(document.location.href);ExecutableHelper.IsNullOrEmpty(r.split("?")[0])&&(n.url=i.furl(t.jsonData.prefix));var s=i.fparam();$.eachProperties(s,function(){var e=this.replace(t.jsonData.prefix+"__","");n.data.push({name:e,selector:s[this]})})}AjaxAdapter.Instance.request(n,function(n){t.complete(n,e)})},incodingExtend(ExecutableSubmitAction,ExecutableActionBase),ExecutableSubmitAction.prototype.internalExecute=function(state){var current=this,formSelector=eval(this.jsonData.formSelector),form=$(formSelector).is("form")?formSelector:$(formSelector).closest("form").first(),ajaxOptions=$.extend(!0,{data:[],error:function(e){$(document).trigger(jQuery.Event(IncSpecialBinds.IncAjaxError),IncodingResult.Success(IncAjaxEvent.Create(e))),$(document).trigger(jQuery.Event(IncSpecialBinds.IncAjaxComplete),IncodingResult.Success(IncAjaxEvent.Create(e)))},success:function(e,t,n,r){$(document).trigger(jQuery.Event(IncSpecialBinds.IncAjaxSuccess),IncodingResult.Success(IncAjaxEvent.Create(n))),$(document).trigger(jQuery.Event(IncSpecialBinds.IncAjaxComplete),IncodingResult.Success(IncAjaxEvent.Create(n))),current.complete(new IncodingResult(e),state)},beforeSubmit:function(e,t,n){var r=$(form).valid();return r?$(document).trigger(jQuery.Event(IncSpecialBinds.IncAjaxBefore),IncodingResult.Success({})):$(form).validate().focusInvalid(),r}},this.jsonData.options),url=this.jsonData.options.url;if(!ExecutableHelper.IsNullOrEmpty(url)){var queryFromString=$.url(url).param();$.eachProperties(queryFromString,function(){ajaxOptions.data.push({name:this,value:current.tryGetVal(queryFromString[this])})}),ajaxOptions.url=url.split("?")[0],ExecutableHelper.IsNullOrEmpty(ajaxOptions.url)&&delete ajaxOptions.url}$(form).ajaxSubmit(ajaxOptions)},incodingExtend(ExecutableInsert,ExecutableBase),ExecutableInsert.prototype.internalExecute=function(){var current=this,insertContent=ExecutableHelper.IsNullOrEmpty(current.jsonData.result)?ExecutableHelper.IsNullOrEmpty(this.result)?"":this.result:this.tryGetVal(current.jsonData.result);if(!ExecutableHelper.IsNullOrEmpty(current.jsonData.property)){var insertObject=this.result;_.isArray(this.result)&&(insertObject=this.result.length>0?this.result[0]:{}),insertContent=insertObject.hasOwnProperty(current.jsonData.property)?insertObject[current.jsonData.property]:""}if(ExecutableHelper.ToBool(current.jsonData.prepare)&&$(_.isArray(insertContent)?insertContent:[insertContent]).each(function(){var e=this;$.eachProperties(this,function(){e[this]=current.tryGetVal(e[this])})}),!ExecutableHelper.IsNullOrEmpty(current.jsonData.template)){var templateId=current.jsonData.template;if(templateId.startsWith("||ajax*")){var json=templateId.substring(2,templateId.length-2).substring(templateId.indexOf("*")-1,templateId.length);templateId=current.tryGetVal("||buildurl*{0}||".f($.parseJSON(json).url))}insertContent=TemplateFactory.ToHtml(ExecutableInsert.Template,templateId,function(){return current.tryGetVal(current.jsonData.template)},insertContent)}ExecutableHelper.IsNullOrEmpty(insertContent)&&(insertContent=""),jQuery.browser.msie&&"9.0"===jQuery.browser.version&&("string"==typeof insertContent||insertContent instanceof String)&&(insertContent=insertContent.replace(/>\s+(?=<\/?(t|c)[hardfob])/gm,">")),eval("$(current.target).{0}(insertContent.toString())".f(current.jsonData.insertType));var target=current.target;"after"===current.jsonData.insertType.toLowerCase()&&(target=$(current.target).next()),"before"===current.jsonData.insertType.toLowerCase()&&(target=$(current.target).prev()),IncodingEngine.Current.parse(target),$(document).trigger(jQuery.Event(IncSpecialBinds.IncInsert))},ExecutableInsert.Template=new IncHandlerbarsTemplate,incodingExtend(ExecutableTrigger,ExecutableBase),ExecutableTrigger.prototype.internalExecute=function(){var e=ExecutableHelper.IsNullOrEmpty(this.jsonData.property)?this.result:this.result.hasOwnProperty(this.jsonData.property)?this.result[this.jsonData.property]:"";$(this.target).trigger(this.jsonData.trigger,new IncodingResult({success:!0,data:e,redirectTo:""}))},incodingExtend(ExecutableValidationParse,ExecutableBase),ExecutableValidationParse.prototype.internalExecute=function(){var e=$(this.target).is("form")?this.target:$(this.target).closest("form").first();$(e).removeData("validator").removeData("unobtrusiveValidation"),$.validator.unobtrusive.parse(e),$("[data-val-equalto-other]",e).each(function(){var e="#"+$(this).data("val-equalto-other").replaceAll("*.","Input_");$(e).length>0&&$(this).rules("add",{required:!0,equalTo:e})})},incodingExtend(ExecutableValidationRefresh,ExecutableBase),ExecutableValidationRefresh.prototype.internalExecute=function(){var e=this,t="input-validation-error",n="field-validation-error",r="field-validation-valid",a=ExecutableHelper.IsNullOrEmpty(e.result)?[]:e.result;$(a).each(function(){var a=this.name.toString(),i=$("[name]",e.target).filter(function(){return $(this).attr("name").toLowerCase()==a.toLowerCase()}),s=$("[data-valmsg-for]",e.target).filter(function(){return $(this).attr("data-valmsg-for").toLowerCase()==a.toLowerCase()});ExecutableHelper.ToBool(this.isValid)?($(i).removeClass(t),$(s).removeClass(n).addClass(r).empty()):($(i).addClass(t),$(s).removeClass(r).addClass(n).html($("<span/>").attr({"for":a,generated:!0}).html(this.errorMessage)))}),0===$(a).length&&($(e.target).find(".input-validation-error").removeClass(t),
$(e.target).find(".field-validation-error").addClass(r).removeClass(n).empty()),$($(e.target).is("form")?e.target:$("form",this.target)).validate().focusInvalid()},incodingExtend(ExecutableEval,ExecutableBase),ExecutableEval.prototype.internalExecute=function(){eval(this.jsonData.code)},incodingExtend(ExecutableEvalMethod,ExecutableBase),ExecutableEvalMethod.prototype.internalExecute=function(){for(var length=this.jsonData.args.length,args="",i=0;length>i;i++)args+="this.tryGetVal(this.jsonData.args[{0}])".f(i),i!=length-1&&(args+=",");var contextStr=ExecutableHelper.IsNullOrEmpty(this.jsonData.context)?"":this.jsonData.context+".";eval("{0}{1}({2})".f(contextStr,this.jsonData.method,args))},incodingExtend(ExecutableBreak,ExecutableBase),ExecutableBreak.prototype.internalExecute=function(){throw new IncClientException},incodingExtend(ExecutableStoreInsert,ExecutableBase),ExecutableStoreInsert.prototype.internalExecute=function(){var e=$.url(document.location.href),t=this.jsonData.prefix;ExecutableHelper.ToBool(this.jsonData.replace)&&e.clearFparam();var n=this.target;$.eachFormElements(n,function(){var n=$(this).prop("name"),r=ExecutableHelper.Instance.TryGetVal(this);ExecutableHelper.IsNullOrEmpty(r)?e.removeFparam(n,t):e.setFparam(n,r,t)}),ExecutableHelper.RedirectTo(e.toHref())},incodingExtend(ExecutableStoreFetch,ExecutableBase),ExecutableStoreFetch.prototype.internalExecute=function(){var e=this.jsonData.prefix+"__",t=$.url(window.location.href).fparam();$.eachFormElements(this.target,function(){var n=$(this).prop("name"),r=e+n,a="";t.hasOwnProperty(r)&&(a=t[r]),ExecutableHelper.Instance.TrySetValue(this,a)})},incodingExtend(ExecutableStoreManipulate,ExecutableBase),ExecutableStoreManipulate.prototype.internalExecute=function(){var e=this;switch(e.jsonData.type){case"hash":var t=$.url(document.location.href);t.encodeAllParams();var n=$.parseJSON(e.jsonData.methods);return $(n).each(function(){switch(this.verb){case"remove":t.removeFparam(this.key,this.prefix);break;case"set":t.setFparam(this.key,e.tryGetVal(this.value),this.prefix)}}),ExecutableHelper.RedirectTo(t.toHref());default:throw"Argument out of range {0}".f(this.jsonData.type)}},incodingExtend(ExecutableForm,ExecutableBase),ExecutableForm.prototype.internalExecute=function(){var e=$(this.target).is("form")?this.target:$(this.target).closest("form").first(),t=this.jsonData.method;switch(t){case"reset":$(e).resetForm();break;case"clear":$(e).clearForm()}},incodingExtend(ExecutableBind,ExecutableBase),ExecutableBind.prototype.internalExecute=function(){var e=this.jsonData.type;switch(e){case"attach":$(this.target).removeData("incoding-runner"),$(this.target).attr("incoding",this.jsonData.meta),IncodingEngine.Current.parse(this.target);break;case"detach":ExecutableHelper.IsNullOrEmpty(this.jsonData.bind)?$(this.target).unbind():$(this.target).unbind(this.jsonData.bind)}},ConditionalFactory.Create=function(data,executable){var conditional=eval("new Conditional"+data.type+"();");return conditional.jsonData=data,conditional.executable=executable,conditional},ConditionalBase.prototype={isSatisfied:function(e){this.self=this.executable.self,this.target=this.executable.getTarget();var t=this.isInternalSatisfied(e);return ExecutableHelper.ToBool(this.jsonData.inverse)?!t:t},isInternalSatisfied:function(e){},tryGetVal:function(e){return this.executable.tryGetVal(e)}},incodingExtend(ConditionalData,ConditionalBase),ConditionalData.prototype.isInternalSatisfied=function(e){var t=this.tryGetVal(this.jsonData.value),n=this.jsonData.method;return ExecutableHelper.IsData(e,this.jsonData.property,function(){return ExecutableHelper.Compare(this,t,n)})},incodingExtend(ConditionalDataIsId,ConditionalBase),ConditionalDataIsId.prototype.isInternalSatisfied=function(e){return ExecutableHelper.IsData(e,this.jsonData.property,function(){return $("#"+this).length>0})},incodingExtend(ConditionalEval,ConditionalBase),ConditionalEval.prototype.isInternalSatisfied=function(data){return eval(this.jsonData.code)},incodingExtend(ConditionalIs,ConditionalBase),ConditionalIs.prototype.isInternalSatisfied=function(e){var t=this.tryGetVal(this.jsonData.left),n=this.tryGetVal(this.jsonData.right);return ExecutableHelper.Compare(t,n,this.jsonData.method)};